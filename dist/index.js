!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.mutated=e():t.mutated=e()}(window,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function c(t){var e="function"==typeof Map?new Map:void 0;return(c=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return a(t,arguments,l(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,t)})(t)}function a(t,e,r){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&f(o,r.prototype),o}).apply(null,arguments)}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}r.r(e);var s=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return u(this,(t=l(e)).call.apply(t,[this].concat(n)))}var r,n,s;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,c(Array)),r=e,(n=[{key:"last",value:function(){return this[this.length-1]}},{key:"grip",value:function(t){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"noname",n={},o=0;o<this.length;o++){var i=t(this[o]);i in n||(n[i]=new e(0)),n[i].push(this[o])}return new b(r,n)}},{key:"tros",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return void 0===t?this.sort():this.sort(function(r,n){return(t(r)-t(n))*e}),this.newRef(this)}},{key:"uniq",value:function(t){for(var r={},n=0;n<this.length;n++)r[t(this[n])]=this[n];var o=new e(0);for(var i in r)o.push(r[i]);return o}},{key:"dups",value:function(t){for(var r=new e(0),n=0;n<this.length-1;n++)t(this[n])===t(this[n+1])&&r.unshift(this[n]);return r}},{key:"cascade",value:function(t,e){var r=this.grip(t).vals();r.reverse();for(var n=r.shift();r.length>0;n=r.shift())for(var o=r[0];n.length>0;){var i=n.shift(),u=!0,c=!1,a=void 0;try{for(var f,l=o[Symbol.iterator]();!(u=(f=l.next()).done);u=!0){var s=f.value;e(i,s)&&s.subs.push(i)}}catch(t){c=!0,a=t}finally{try{u||null==l.return||l.return()}finally{if(c)throw a}}}return n}},{key:"flatten",value:function(){for(var t=a(e,o(this)),r=new e(0);t.length;){var n=t.shift();r.push(n),n.subs.length&&t.push.apply(t,o(n.subs))}return r}},{key:"join",value:function(t,e){for(var r=e.fromCol,n=e.thisCol,o=new Map,i=t.length-1;i>=0;i--)o.set(r,t[i][r]);for(var u=this.length-1;u>=0;u--){var c=this[u][n];o.has(c)&&Object.assign(this[u],o.get(c))}}},{key:"insert",value:function(t,e){return this.splice(t,0,e),this.slice()}},{key:"swap",value:function(t){if(1===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)){if(t<this.length-1){var e=[this[t+1],this[t]];this[t]=e[0],this[t+1]=e[1]}}else if(t>0){var r=[this[t],this[t-1]];this[t-1]=r[0],this[t]=r[1]}return this.newRef(this)}},{key:"remove",value:function(t){return this.splice(t,1),this.slice()}},{key:"newRef",value:function(t){console.log(t);var e=t.constructor;return Object.assign(new e,t)}}])&&i(r.prototype,n),s&&i(r,s),e}();function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(r.push(u.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==c.return||c.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"iter",function(t){for(var e=Object.entries(n.group),r=0;r<e.length;r++){var o=p(e[r],2),i=o[0],u=o[1];n.group[i]=t(i,u)}return n.newRef(n)}),this.desc=e,this.group=r}var e,r,n;return e=t,(r=[{key:"get",value:function(t){return this.group[t]}},{key:"set",value:function(e,r){var n=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(r,!0).forEach(function(e){v(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},this.group,v({},e,r));return new t(this.desc,n)}},{key:"vals",value:function(){return Object.values(this.group)}},{key:"keys",value:function(){return Object.keys(this.group)}},{key:"grap",value:function(){for(var t=new s(0),e=this.vals(),r=0;r<e.length;r++)t.unshift(e[r]);return t}},{key:"newRef",value:function(t){var e=t.constructor;return Object.assign(new e,t)}}])&&h(e.prototype,r),n&&h(e,n),t}();function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t,e,r){return(w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,r){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return r&&O(o,r.prototype),o}).apply(null,arguments)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function j(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var k=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cols=e;var n=r.subs,o=void 0===n?new s(0):n,i=r.tabs,u=r.attr,c=void 0===u?{}:u;this.attr=c,this.subs=o,this.tabs=i}var e,r,n;return e=t,(r=[{key:"get",value:function(t){return this.cols[t]}},{key:"set",value:function(t,e){return this.cols[t]=e,this.newRef(this)}},{key:"setAttr",value:function(t,e){return this.attr[t]=e,this.newRef(this)}},{key:"type",value:function(t,e){var r=t.find(function(t){return t.colKey===e});return r&&r.attr&&void 0!==r.attr.type?r.attr.type:typeCheck(this.cols[e])}},{key:"trim",value:function(t){var e={};for(var r in this.cols)-1===t.indexOf(r)&&(e[r]=this.cols[r]);return this.cols=e,this.newRef(this)}},{key:"pick",value:function(t){var e={},r=!0,n=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;if(c in this.cols)e[c]=this.cols[c];else if("oldKey"in c){var a=c.oldKey,f=c.newKey;a in this.cols&&(e[f]=this.cols[a])}}}catch(t){n=!0,o=t}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}return this.cols=e,this.newRef(this)}},{key:"keys",value:function(){return Object.keys(this.cols)}},{key:"toList",value:function(t){var e=this;return w(s,j(t.map(function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(r,!0).forEach(function(e){d(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t,{value:e.cols[t.colKey]})})))}},{key:"toObject",value:function(){return Object.assign({},this.cols)}},{key:"tab",value:function(t,e){return this.tabs=new Sheet(t,{head:e}),this.newRef(this)}},{key:"newRef",value:function(t){var e=t.constructor;return Object.assign(new e,t)}}])&&m(e.prototype,r),n&&m(e,n),t}();function P(t){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _(t,e){return!e||"object"!==P(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function x(t,e){return(x=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var A=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return _(this,(t=R(e)).call.apply(t,[this].concat(n)))}var r,n,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&x(t,e)}(e,s),r=e,(n=[{key:"makeRecord",value:function(){for(var t={String:"",Integer:0,Number:0,Array:[],Object:{},Undefined:void 0,Boolean:!1,Date:new Date,DateInterval:"0-0-0"},e={},r=0;r<this.length;r++){var n=this[r].dataType?this[r].dataType:"String";e[this[r].colKey]=t[n]}return new k(e)}}])&&S(r.prototype,n),o&&S(r,o),e}();r.d(e,"Group",function(){return b}),r.d(e,"Header",function(){return A}),r.d(e,"List",function(){return s}),r.d(e,"Record",function(){return k})}])});